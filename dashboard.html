<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Women Safety | Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="css/style.css">
</head>

<body>

<!-- ===== NAVBAR ===== -->
<nav class="navbar">
  <h2>ğŸ‘© Women Safety</h2>
  <div>
    <a href="dashboard.html">Dashboard</a>
    <a href="laws.html">Know Your Rights</a>
    <a href="chatbot.html">Support Bot</a>
    <button onclick="toggleTheme()" class="theme-btn">ğŸŒ™</button>

    <button onclick="logout()" class="logout-btn">Logout</button>
  </div>
</nav>

<!-- ===== MAIN DASHBOARD ===== -->
<div class="dashboard-container">

  <div class="card danger">
  <h3>ğŸ“± Fake Call</h3>
  <p>Trigger a fake incoming call to escape unsafe situations.</p>
  <button onclick="fakeCall()">Trigger Fake Call</button>
</div>


  <div class="card">
  <h3>ğŸ“Š Awareness Progress</h3>
  <canvas id="progressChart"></canvas>
</div>

  <div class="card">
  <h3>ğŸ“ Emergency Contacts</h3>
  <ul>
    <li>Police: <b>100</b></li>
    <li>Women Helpline: <b>181</b></li>
    <li>Ambulance: <b>108</b></li>
    <li>Child Helpline: <b>1098</b></li>
  </ul>
</div>


  <!-- Profile Card -->
  <div class="card">
    <h3>ğŸ‘¤ Profile Information</h3>
    <p><b>Name:</b> <span id="userName"></span></p>
    <p><b>Email:</b> <span id="userEmail"></span></p>
  </div>

  <!-- SOS Card -->
  <div class="card danger">
    <h3>ğŸš¨ Emergency SOS</h3>
    <p>Click below if you feel unsafe</p>
    <button onclick="sendSOS()">SEND SOS</button>
  </div>

  <!-- Awareness Card -->
  <div class="card">
    <h3>ğŸ“˜ Awareness</h3>
    <p>Learn about women safety laws & rights</p>
    <a href="laws.html" class="btn">Explore Laws</a>
  </div>

</div>

<!-- ===== FOOTER ===== -->
<footer>
  <p>Â© 2026 Women Safety Project | Frontend Demo</p>
</footer>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- ===== JAVASCRIPT ===== -->
<script>
  // Check login
  const user = localStorage.getItem("loggedInUser");
  const email = localStorage.getItem("userEmail");

  if (!user || !email) {
    window.location.href = "login.html";
  }

  document.getElementById("userName").innerText = user;
  document.getElementById("userEmail").innerText = email;

  // Logout
  function logout() {
    localStorage.clear();
    window.location.href = "login.html";
  }

  // SOS Demo
  function sendSOS() {
    alert("ğŸš¨ SOS Triggered!\nEmergency contacts will be notified (Demo).");
  }
  function toggleTheme() {
  document.body.classList.toggle("dark");
  localStorage.setItem("theme",
    document.body.classList.contains("dark") ? "dark" : "light"
  );
}

if (localStorage.getItem("theme") === "dark") {
  document.body.classList.add("dark");
}

// ===== FEATURE 3: AWARENESS PROGRESS CHART =====
const ctx = document.getElementById("progressChart");

if (ctx) {
  new Chart(ctx, {
    type: "bar",
    data: {
      labels: ["IPC 354", "DV Act", "Cyber Law", "POSH"],
      datasets: [{
        label: "Awareness %",
        data: [70, 85, 60, 90]
      }]
    }
  });
}


// ===== FAKE CALL FEATURE =====
function fakeCall() {
  alert("ğŸ“ Incoming Call...\nCaller: MOM â¤ï¸");

  setTimeout(() => {
    alert("ğŸ“´ Call Ended");
  }, 5000);
}


// ===== ADMIN DASHBOARD UI =====
if (localStorage.getItem("role") === "admin") {
  document.querySelector(".dashboard-container").insertAdjacentHTML(
    "beforeend",
    `
    <div class="card">
      <h3>ğŸ‘¨â€ğŸ’¼ Admin Dashboard</h3>
      <p>Total Users: 120</p>
      <p>Reports Received: 8</p>
      <p>System Status: Active</p>
    </div>
    `
  );
}

let deferredPrompt;

window.addEventListener("beforeinstallprompt", e => {
  e.preventDefault();
  deferredPrompt = e;

  const btn = document.createElement("button");
  btn.innerText = "ğŸ“² Install App";
  btn.style.position = "fixed";
  btn.style.bottom = "20px";
  btn.style.right = "20px";
  btn.onclick = () => {
    deferredPrompt.prompt();
  };

  document.body.appendChild(btn);
});



</script>

</body>
</html>
